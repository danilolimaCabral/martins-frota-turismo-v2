{
  "query": "-- Tabela de Funcionários\nCREATE TABLE IF NOT EXISTS funcionarios (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT,\n  \n  -- Dados Pessoais\n  nome VARCHAR(255) NOT NULL,\n  cpf VARCHAR(14) UNIQUE NOT NULL,\n  rg VARCHAR(20),\n  rg_orgao_emissor VARCHAR(20),\n  data_nascimento DATE,\n  sexo ENUM('M', 'F', 'Outro'),\n  estado_civil ENUM('Solteiro', 'Casado', 'Divorciado', 'Viuvo', 'Uniao Estavel'),\n  \n  -- Contato\n  telefone VARCHAR(20),\n  celular VARCHAR(20),\n  email VARCHAR(320),\n  \n  -- Endereço\n  cep VARCHAR(10),\n  endereco TEXT,\n  numero VARCHAR(20),\n  complemento VARCHAR(100),\n  bairro VARCHAR(100),\n  cidade VARCHAR(100),\n  estado VARCHAR(2),\n  \n  -- Dados Contratuais\n  data_admissao DATE NOT NULL,\n  data_demissao DATE,\n  cargo VARCHAR(100) NOT NULL,\n  departamento VARCHAR(100),\n  tipo_contrato ENUM('CLT', 'PJ', 'Estagiario', 'Temporario') DEFAULT 'CLT' NOT NULL,\n  \n  -- Dados Salariais\n  salario_base DECIMAL(10, 2) NOT NULL,\n  adicional_periculosidade DECIMAL(5, 2) DEFAULT 0,\n  adicional_insalubridade DECIMAL(5, 2) DEFAULT 0,\n  adicional_noturno DECIMAL(5, 2) DEFAULT 0,\n  vale_transporte DECIMAL(10, 2) DEFAULT 0,\n  vale_alimentacao DECIMAL(10, 2) DEFAULT 0,\n  plano_saude DECIMAL(10, 2) DEFAULT 0,\n  \n  -- Dados Bancários\n  banco VARCHAR(100),\n  agencia VARCHAR(20),\n  conta VARCHAR(30),\n  tipo_conta ENUM('Corrente', 'Poupanca', 'Salario'),\n  pix_chave VARCHAR(100),\n  \n  -- Documentos Trabalhistas\n  ctps_numero VARCHAR(20),\n  ctps_serie VARCHAR(20),\n  ctps_uf VARCHAR(2),\n  pis_numero VARCHAR(20),\n  titulo_eleitor VARCHAR(20),\n  reservista VARCHAR(20),\n  \n  -- CNH (para motoristas)\n  cnh_numero VARCHAR(20),\n  cnh_categoria VARCHAR(5),\n  cnh_validade DATE,\n  \n  -- Status\n  status ENUM('ativo', 'ferias', 'afastado', 'demitido') DEFAULT 'ativo' NOT NULL,\n  \n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (user_id) REFERENCES users(id)\n);\n\n-- Tabela de Dependentes\nCREATE TABLE IF NOT EXISTS dependentes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  funcionario_id INT NOT NULL,\n  nome VARCHAR(255) NOT NULL,\n  cpf VARCHAR(14),\n  data_nascimento DATE NOT NULL,\n  parentesco ENUM('Filho', 'Filha', 'Conjuge', 'Pai', 'Mae', 'Outro') NOT NULL,\n  dependente_ir BOOLEAN DEFAULT TRUE NOT NULL,\n  dependente_sf BOOLEAN DEFAULT TRUE NOT NULL,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (funcionario_id) REFERENCES funcionarios(id) ON DELETE CASCADE\n);\n\n-- Tabela de Folhas de Pagamento\nCREATE TABLE IF NOT EXISTS folhas_pagamento (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  mes_referencia INT NOT NULL,\n  ano_referencia INT NOT NULL,\n  status ENUM('aberta', 'processando', 'fechada', 'paga') DEFAULT 'aberta' NOT NULL,\n  data_fechamento DATETIME,\n  data_pagamento DATE,\n  total_bruto DECIMAL(12, 2) DEFAULT 0,\n  total_descontos DECIMAL(12, 2) DEFAULT 0,\n  total_liquido DECIMAL(12, 2) DEFAULT 0,\n  arquivo_cnab TEXT,\n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- Tabela de Itens da Folha\nCREATE TABLE IF NOT EXISTS itens_folha (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  folha_id INT NOT NULL,\n  funcionario_id INT NOT NULL,\n  \n  -- Proventos\n  salario_base DECIMAL(10, 2) DEFAULT 0,\n  horas_extras_50 DECIMAL(10, 2) DEFAULT 0,\n  horas_extras_100 DECIMAL(10, 2) DEFAULT 0,\n  adicional_noturno DECIMAL(10, 2) DEFAULT 0,\n  adicional_periculosidade DECIMAL(10, 2) DEFAULT 0,\n  adicional_insalubridade DECIMAL(10, 2) DEFAULT 0,\n  comissoes DECIMAL(10, 2) DEFAULT 0,\n  bonus DECIMAL(10, 2) DEFAULT 0,\n  outros_proventos DECIMAL(10, 2) DEFAULT 0,\n  \n  -- Descontos\n  inss DECIMAL(10, 2) DEFAULT 0,\n  irrf DECIMAL(10, 2) DEFAULT 0,\n  fgts DECIMAL(10, 2) DEFAULT 0,\n  vale_transporte DECIMAL(10, 2) DEFAULT 0,\n  vale_alimentacao DECIMAL(10, 2) DEFAULT 0,\n  plano_saude DECIMAL(10, 2) DEFAULT 0,\n  adiantamento DECIMAL(10, 2) DEFAULT 0,\n  faltas DECIMAL(10, 2) DEFAULT 0,\n  outros_descontos DECIMAL(10, 2) DEFAULT 0,\n  \n  -- Totais\n  total_proventos DECIMAL(10, 2) DEFAULT 0,\n  total_descontos DECIMAL(10, 2) DEFAULT 0,\n  salario_liquido DECIMAL(10, 2) DEFAULT 0,\n  \n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (folha_id) REFERENCES folhas_pagamento(id) ON DELETE CASCADE,\n  FOREIGN KEY (funcionario_id) REFERENCES funcionarios(id)\n);\n\n-- Tabela de Horas Extras\nCREATE TABLE IF NOT EXISTS horas_extras (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  funcionario_id INT NOT NULL,\n  data DATE NOT NULL,\n  horas_trabalhadas DECIMAL(5, 2) NOT NULL,\n  tipo ENUM('50%', '100%', 'Noturno') NOT NULL,\n  valor_hora DECIMAL(10, 2),\n  valor_total DECIMAL(10, 2),\n  aprovado BOOLEAN DEFAULT FALSE NOT NULL,\n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (funcionario_id) REFERENCES funcionarios(id) ON DELETE CASCADE\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4GH8MCSqhpmNowN.efeda4e2cea8 --database fsPfZDk4yqhxEkCbsNC9Vh --execute -- Tabela de Funcionários\nCREATE TABLE IF NOT EXISTS funcionarios (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT,\n  \n  -- Dados Pessoais\n  nome VARCHAR(255) NOT NULL,\n  cpf VARCHAR(14) UNIQUE NOT NULL,\n  rg VARCHAR(20),\n  rg_orgao_emissor VARCHAR(20),\n  data_nascimento DATE,\n  sexo ENUM('M', 'F', 'Outro'),\n  estado_civil ENUM('Solteiro', 'Casado', 'Divorciado', 'Viuvo', 'Uniao Estavel'),\n  \n  -- Contato\n  telefone VARCHAR(20),\n  celular VARCHAR(20),\n  email VARCHAR(320),\n  \n  -- Endereço\n  cep VARCHAR(10),\n  endereco TEXT,\n  numero VARCHAR(20),\n  complemento VARCHAR(100),\n  bairro VARCHAR(100),\n  cidade VARCHAR(100),\n  estado VARCHAR(2),\n  \n  -- Dados Contratuais\n  data_admissao DATE NOT NULL,\n  data_demissao DATE,\n  cargo VARCHAR(100) NOT NULL,\n  departamento VARCHAR(100),\n  tipo_contrato ENUM('CLT', 'PJ', 'Estagiario', 'Temporario') DEFAULT 'CLT' NOT NULL,\n  \n  -- Dados Salariais\n  salario_base DECIMAL(10, 2) NOT NULL,\n  adicional_periculosidade DECIMAL(5, 2) DEFAULT 0,\n  adicional_insalubridade DECIMAL(5, 2) DEFAULT 0,\n  adicional_noturno DECIMAL(5, 2) DEFAULT 0,\n  vale_transporte DECIMAL(10, 2) DEFAULT 0,\n  vale_alimentacao DECIMAL(10, 2) DEFAULT 0,\n  plano_saude DECIMAL(10, 2) DEFAULT 0,\n  \n  -- Dados Bancários\n  banco VARCHAR(100),\n  agencia VARCHAR(20),\n  conta VARCHAR(30),\n  tipo_conta ENUM('Corrente', 'Poupanca', 'Salario'),\n  pix_chave VARCHAR(100),\n  \n  -- Documentos Trabalhistas\n  ctps_numero VARCHAR(20),\n  ctps_serie VARCHAR(20),\n  ctps_uf VARCHAR(2),\n  pis_numero VARCHAR(20),\n  titulo_eleitor VARCHAR(20),\n  reservista VARCHAR(20),\n  \n  -- CNH (para motoristas)\n  cnh_numero VARCHAR(20),\n  cnh_categoria VARCHAR(5),\n  cnh_validade DATE,\n  \n  -- Status\n  status ENUM('ativo', 'ferias', 'afastado', 'demitido') DEFAULT 'ativo' NOT NULL,\n  \n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (user_id) REFERENCES users(id)\n);\n\n-- Tabela de Dependentes\nCREATE TABLE IF NOT EXISTS dependentes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  funcionario_id INT NOT NULL,\n  nome VARCHAR(255) NOT NULL,\n  cpf VARCHAR(14),\n  data_nascimento DATE NOT NULL,\n  parentesco ENUM('Filho', 'Filha', 'Conjuge', 'Pai', 'Mae', 'Outro') NOT NULL,\n  dependente_ir BOOLEAN DEFAULT TRUE NOT NULL,\n  dependente_sf BOOLEAN DEFAULT TRUE NOT NULL,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (funcionario_id) REFERENCES funcionarios(id) ON DELETE CASCADE\n);\n\n-- Tabela de Folhas de Pagamento\nCREATE TABLE IF NOT EXISTS folhas_pagamento (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  mes_referencia INT NOT NULL,\n  ano_referencia INT NOT NULL,\n  status ENUM('aberta', 'processando', 'fechada', 'paga') DEFAULT 'aberta' NOT NULL,\n  data_fechamento DATETIME,\n  data_pagamento DATE,\n  total_bruto DECIMAL(12, 2) DEFAULT 0,\n  total_descontos DECIMAL(12, 2) DEFAULT 0,\n  total_liquido DECIMAL(12, 2) DEFAULT 0,\n  arquivo_cnab TEXT,\n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- Tabela de Itens da Folha\nCREATE TABLE IF NOT EXISTS itens_folha (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  folha_id INT NOT NULL,\n  funcionario_id INT NOT NULL,\n  \n  -- Proventos\n  salario_base DECIMAL(10, 2) DEFAULT 0,\n  horas_extras_50 DECIMAL(10, 2) DEFAULT 0,\n  horas_extras_100 DECIMAL(10, 2) DEFAULT 0,\n  adicional_noturno DECIMAL(10, 2) DEFAULT 0,\n  adicional_periculosidade DECIMAL(10, 2) DEFAULT 0,\n  adicional_insalubridade DECIMAL(10, 2) DEFAULT 0,\n  comissoes DECIMAL(10, 2) DEFAULT 0,\n  bonus DECIMAL(10, 2) DEFAULT 0,\n  outros_proventos DECIMAL(10, 2) DEFAULT 0,\n  \n  -- Descontos\n  inss DECIMAL(10, 2) DEFAULT 0,\n  irrf DECIMAL(10, 2) DEFAULT 0,\n  fgts DECIMAL(10, 2) DEFAULT 0,\n  vale_transporte DECIMAL(10, 2) DEFAULT 0,\n  vale_alimentacao DECIMAL(10, 2) DEFAULT 0,\n  plano_saude DECIMAL(10, 2) DEFAULT 0,\n  adiantamento DECIMAL(10, 2) DEFAULT 0,\n  faltas DECIMAL(10, 2) DEFAULT 0,\n  outros_descontos DECIMAL(10, 2) DEFAULT 0,\n  \n  -- Totais\n  total_proventos DECIMAL(10, 2) DEFAULT 0,\n  total_descontos DECIMAL(10, 2) DEFAULT 0,\n  salario_liquido DECIMAL(10, 2) DEFAULT 0,\n  \n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (folha_id) REFERENCES folhas_pagamento(id) ON DELETE CASCADE,\n  FOREIGN KEY (funcionario_id) REFERENCES funcionarios(id)\n);\n\n-- Tabela de Horas Extras\nCREATE TABLE IF NOT EXISTS horas_extras (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  funcionario_id INT NOT NULL,\n  data DATE NOT NULL,\n  horas_trabalhadas DECIMAL(5, 2) NOT NULL,\n  tipo ENUM('50%', '100%', 'Noturno') NOT NULL,\n  valor_hora DECIMAL(10, 2),\n  valor_total DECIMAL(10, 2),\n  aprovado BOOLEAN DEFAULT FALSE NOT NULL,\n  observacoes TEXT,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  \n  FOREIGN KEY (funcionario_id) REFERENCES funcionarios(id) ON DELETE CASCADE\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1196
}